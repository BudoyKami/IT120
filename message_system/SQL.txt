CREATE USER sender_user WITH PASSWORD 'sender123';
CREATE USER receiver_user WITH PASSWORD 'receiver123';

GRANT CONNECT ON DATABASE message_system TO receiver_user;
GRANT USAGE ON SCHEMA public TO receiver_user;
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO receiver_user;
GRANT ALL PRIVILEGES ON TABLE senderapp_message TO receiver_user;

GRANT CONNECT ON DATABASE message_system TO sender_user;
GRANT USAGE ON SCHEMA public TO sender_user;
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO sender_user;
GRANT ALL PRIVILEGES ON TABLE receiverapp_message TO sender_user;

ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO receiver_user;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO sender_user;

